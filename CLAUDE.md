# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

A course website built with **Next.js 16 + Fumadocs** that teaches mid-career professionals (non-technical solopreneurs, founders, operators) how to use AI tools (Claude Code, ChatGPT, Cursor) as cognitive multipliers. Content is written in MDX and organized into: 
* Home
* Module 0: Getting Started
* Module 1: Fundamentals
* Module 2: Context 

## Commands

```bash
npm run dev          # Start dev server at localhost:3000 with hot reload
npm run build        # Production build (static site generation)
npm start            # Serve production build
npm run lint         # ESLint with Next.js core web vitals rules
npm run types:check  # Full type check: fumadocs-mdx + next + tsc --noEmit
```

## Architecture

**Content pipeline:** MDX files in `content/docs/` → Fumadocs source loader (`lib/source.ts`) → Next.js catch-all route (`app/docs/[[...slug]]/page.tsx`)

**Key architectural decisions:**
- **Fumadocs** handles docs routing, sidebar navigation, search (Orama), and MDX rendering. Most "framework" behavior lives in fumadocs packages, not custom code.
- **Navigation order** is controlled by `content/docs/meta.json` and per-folder `meta.json` files, not by filesystem order.
- **`.source/` directory** is auto-generated by `fumadocs-mdx` at build/postinstall time. Never edit these files manually.
- **AI-friendly exports:** `/llms.txt` and `/llms-full.txt` routes serve course content as plain text for LLM consumption. The rewrite rule in `next.config.mjs` maps `/docs/:path*.mdx` to an internal route that serves raw processed markdown.
- **Page actions** (`components/ai/page-actions.tsx`) are client components that let readers copy page markdown or open content in external tools (GitHub, Claude, ChatGPT, Cursor, Scira).

## Adding or Editing Course Content

1. Create/edit `.mdx` files in the appropriate `content/docs/{module}/` subfolder
2. Frontmatter requires `title` and `description` fields
3. If adding a new section or reordering, update the relevant `meta.json`
4. Changes hot-reload in dev mode — no restart needed

**Module folders:** `getting-started/`, `fundamentals/` (course-intro, visual-workspace, working-with-files, commands-navigation, agents, custom-subagents, project-memory, whats-next), `context/`

## Key Files

| File | Role |
|------|------|
| `lib/source.ts` | Fumadocs source loader — `getPage()`, `getPages()`, `getLLMText()` |
| `lib/layout.shared.tsx` | Shared nav config: site title, GitHub repo links (`sweiwong/ai-as-your-cos`, branch `main`) |
| `source.config.ts` | Fumadocs content schema and MDX options |
| `app/global.css` | Theme colors (teal/cyan CSS variables), JetBrains Mono font |
| `content/docs/meta.json` | Top-level navigation structure |

## Content Guidelines

- **Audience:** Non-technical professionals (40s–50s). No coding jargon, no AI theory.
- **Tone:** Practical, calm, respectful. Zero hype.
- **Structure:** Demo-driven with concrete, copy-paste-ready prompt examples.

## Workflow Orchestration

### 1. Plan Mode Default

- Enter plan mode for ANY non-trivial task (3+ steps or architectural decisions)
- If something goes sideways, STOP and re-plan immediately — don't keep pushing
- Use plan mode for verification steps, not just building
- Write detailed specs upfront to reduce ambiguity

### 2. Subagent Strategy

- Use subagents liberally to keep main context window clean
- Offload research, exploration, and parallel analysis to subagents
- One task per subagent for focused execution

### 3. Context Management

Context is your most important resource. Proactively use subagents (Task tool) to keep exploration, research, and verbose operations out of the main conversation.

**Default to spawning agents for:**

- Research tasks (web searches, doc lookups, investigating how something works)
- Any investigation where only the summary matters

**Stay in main context for:**

- Direct file edits the user requested
- Short, targeted reads (1-2 files)
- Conversations requiring back-and-forth

### 4. Self-Improvement Loop

- After ANY correction from the user: update `tasks/lessons.md` with the pattern
- Write rules for yourself that prevent the same mistake
- Review lessons at session start for relevant project

### 5. Verification Before Done

- Never mark a task complete without proving it works
- For content: re-read the output and check it against audience profile and tone guidelines
- For code changes: run `npm run build` and `npm run lint` to verify nothing broke

### 6. Bug Fixing (Explain First, Then Fix)

- When given an issue: investigate and diagnose it autonomously
- **Before making any changes**, explain what you found and your proposed fix
- Only implement after explaining — don't silently change things
- Point at logs, errors, or specific content as evidence

## Explain Like a Mentor

When recommending anything — a structural change, a new section, a tool, or an approach — always explain:

1. **What**: What are you recommending? (one sentence)
2. **Why this option**: Why this over the alternatives?
3. **What problem it solves**: What specific problem in *this project* does it address?

The goal: I'm learning as I build. Every recommendation is a teaching moment.

## Task Management

1. **Plan First**: Write plan to `tasks/todo.md` with checkable items
2. **Verify Plan**: Check in before starting implementation
3. **Track Progress**: Mark items complete as you go
4. **Explain Changes**: High-level summary at each step
5. **Document Results**: Add review section to `tasks/todo.md`
6. **Capture Lessons**: Update `tasks/lessons.md` after corrections

## Core Principles

- **Simplicity First**: Make every change as simple as possible.
- **No Laziness**: Find root causes. No temporary fixes.
- **Minimal Impact**: Changes should only touch what's necessary.
- **Readable Code**: Write clear comments explaining what and why. Prioritize readability over cleverness.
